只需知道每头牛的前一头比他大的牛即可，可以用线段树维护，更好的办法是记n[i]为第i头牛前面第一头比他高的牛，则可以得到:while h[i]>h[n[i]] do n[i]:=n[n[i]];可以证明这是线性的。